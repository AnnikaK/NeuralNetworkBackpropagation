import javafx.application.Platform;

public class Fighter {

	private double[] nothing;
	private double[] fight;
	private double[] hide;
	private double[] collectAmmo;
	private double[] getHealing;

	private Window window;

	public Fighter(Window window) {
		this.window = window;

		nothing = new double[] { 0, 0, 0, 0 };

		fight = new double[] { 1, 0, 0, 0 };
		hide = new double[] { 0, 1, 0, 0 };
		collectAmmo = new double[] { 0, 0, 1, 0 };
		getHealing = new double[] { 0, 0, 0, 1 };
	}

	public void showReaction(double[] outputVector) {

		if (equal(outputVector, nothing)) {
			Platform.runLater(() -> window.react("Nichtstun"));
		} else if (equal(outputVector, fight)) {
			Platform.runLater(() -> window.react("Angriff"));
		} else if (equal(outputVector, hide)) {
			Platform.runLater(() -> window.react("Verstecken"));
		} else if (equal(outputVector, collectAmmo)) {
			Platform.runLater(() -> window.react("Munition sammeln"));
		} else if (equal(outputVector, getHealing)) {
			Platform.runLater(() -> window.react("Heilung von Verbündetem erhalten"));
		} else {
			Platform.runLater(() -> window.react("Unentschlossen"));
		}

	}

	private boolean equal(double[] a, double[] b) {
		if (a.length != b.length) {
			return false;
		}
		for (int i = 0; i < a.length; i++) {
			if (Math.abs(a[i] - b[i]) > 0.1) { // toleranzbereich weil exakt 1 /
												// 0 nie erreicht
				return false;
			}
		}
		return true;
	}

}
